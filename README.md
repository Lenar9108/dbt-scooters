# dbt_scooters

`dbt_scooters` — проект на базе dbt, предназначенный для управления и трансформации данных,
связанных с использованием скутеров кикшеринга.
Позволяет выстроить аналитику данных о передвижениях и использовании скутеров.

## Стек
- **dbt**
- **Python**
- **uv** — управление виртуальным окружением и зависимостями
- DWH — зависит от настроек профиля dbt

## Конфигурация

Обновите конфигурационный файл `~/.dbt/profiles.yml` с вашими данными доступа к базе данных.

## Установка и запуск

### Инициализация окружения
```bash
uv venv
source .venv/bin/activate
uv pip install -r requirements.txt
Проверка подключения
dbt debug
Базовые команды dbt (шпаргалка)
Запуск моделей
dbt run
Запуск конкретной модели
dbt run --select model_name
Запуск моделей и тестов
dbt build
Запуск тестов
dbt test
Просмотр DAG и документации
dbt docs generate
dbt docs serve
Компиляция SQL без выполнения
dbt compile
Структура проекта (кратко)
models/ — dbt-модели
seeds/ — статические данные
tests/ — кастомные тесты
macros/ — макросы
dbt_project.yml — конфигурация проекта

Примечание: если виртуальное окружение не активно, используйте `uv run dbt `.

Активируйте PostGIS в базе PostgreSQL, если еще этого не делали:

```sql
create extension postgis schema public;
```
## Полезные макросы

- `dbt run-operation create_role --args "name: finance"` - создание роли в базе (на примере роли "finance")
- `dbt run-operation create_postgis` - активация расширения PostGIS для расчета географических моделей

## Основные команды dbt

- `dbt debug` - проверка подключения к хранилищу данных (проверка профиля)
- `dbt parse` - парсинг файлов проекта (проверка корректности)
- `dbt compile` - компилирует dbt-модели и создает SQL-файлы
- `dbt run` - материализация моделей в таблицы и представления
- `dbt test` - запускает тесты для проверки качества данных
- `dbt seed` - загружает данные в таблицы из CSV-файлов
- `dbt build` - основная команда, комбинирует run, test и seed
- `dbt source freshness` - проверка актуальности данных в источниках
- `dbt docs generate` - генерирует документацию проекта
- `dbt docs serve` - запускает локальный сервер для просмотра документации